<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>لعبة عنزي 2D</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: #87CEEB; /* سماء */
      font-family: Arial, sans-serif;
    }
    canvas {
      display: block;
      margin: 0 auto;
      background: #88B04B; /* أرض خضراء */
      border: 3px solid #333;
    }
    #info {
      position: absolute;
      top: 10px;
      left: 10px;
      color: white;
      font-size: 18px;
      background: rgba(0,0,0,0.5);
      padding: 5px 10px;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <div id="info">النقاط: <span id="score">0</span></div>
  <canvas id="gameCanvas"></canvas>

  <script>
    // إعداد الكانفاس
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    canvas.width = 800;
    canvas.height = 600;

    // شخصية عنزي
    const player = {
      x: canvas.width/2,
      y: canvas.height/2,
      width: 50,
      height: 50,
      speed: 5,
      color: '#FFD700' // ذهبي
    };

    // NPCs
    const npcs = [];
    for(let i=0; i<10; i++){
      npcs.push({
        x: Math.random()*(canvas.width-40),
        y: Math.random()*(canvas.height-40),
        width: 40,
        height: 40,
        speedX: Math.random()*2-1,
        speedY: Math.random()*2-1,
        color: '#FF4500' // أحمر نار
      });
    }

    // نقاط اللاعب
    let score = 0;

    // التحكم
    const keys = {};
    window.addEventListener('keydown', e => keys[e.key] = true);
    window.addEventListener('keyup', e => keys[e.key] = false);

    // تحديث حركة اللاعب
    function movePlayer() {
      if(keys['ArrowUp'] && player.y > 0) player.y -= player.speed;
      if(keys['ArrowDown'] && player.y + player.height < canvas.height) player.y += player.speed;
      if(keys['ArrowLeft'] && player.x > 0) player.x -= player.speed;
      if(keys['ArrowRight'] && player.x + player.width < canvas.width) player.x += player.speed;
    }

    // تحديث حركة NPCs
    function moveNPCs() {
      for(const npc of npcs){
        npc.x += npc.speedX;
        npc.y += npc.speedY;

        if(npc.x <= 0 || npc.x + npc.width >= canvas.width) npc.speedX *= -1;
        if(npc.y <= 0 || npc.y + npc.height >= canvas.height) npc.speedY *= -1;
      }
    }

    // التحقق من التصادم
    function checkCollision(a, b){
      return (
        a.x < b.x + b.width &&
        a.x + a.width > b.x &&
        a.y < b.y + b.height &&
        a.y + a.height > b.y
      );
    }

    // التحديث
    function update() {
      movePlayer();
      moveNPCs();

      // تصادمات
      for(const npc of npcs){
        if(checkCollision(player, npc)){
          score++;
          npc.x = Math.random()*(canvas.width-40);
          npc.y = Math.random()*(canvas.height-40);
        }
      }

      document.getElementById('score').textContent = score;
    }

    // الرسم
    function draw() {
      ctx.clearRect(0,0,canvas.width,canvas.height);

      // رسم اللاعب
      ctx.fillStyle = player.color;
      ctx.fillRect(player.x, player.y, player.width, player.height);

      // رسم NPCs
      for(const npc of npcs){
        ctx.fillStyle = npc.color;
        ctx.fillRect(npc.x, npc.y, npc.width, npc.height);
      }
    }

    // اللعبة
    function gameLoop(){
      update();
      draw();
      requestAnimationFrame(gameLoop);
    }

    gameLoop();
  </script>
</body>
</html>
