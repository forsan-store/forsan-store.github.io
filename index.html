<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>عنزي في الشمال</title>
<style>
  canvas { background: #fff; display: block; margin: 0 auto; }
</style>
</head>
<body>
<canvas id="gameCanvas" width="800" height="600"></canvas>
<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

// اللاعب
let player = { x: 400, y: 500, size: 50, speed: 5 };

// الأغراض
let items = [];
for (let i=0;i<5;i++){
    items.push({x: Math.random()*750, y: Math.random()*450, size:30});
}

// الناس
let people = [];
const kinds = ["friendly","aggressive","mystery"];
for (let i=0;i<5;i++){
    people.push({x: Math.random()*760, y: Math.random()*450, size:40, kind: kinds[Math.floor(Math.random()*3)]});
}

// النقاط
let score = 0;

// التحكم
let keys = {};
window.addEventListener("keydown", e => keys[e.key] = true);
window.addEventListener("keyup", e => keys[e.key] = false);

// اللعبة
function gameLoop(){
    // تحديث
    if(keys["ArrowLeft"] && player.x > 0) player.x -= player.speed;
    if(keys["ArrowRight"] && player.x + player.size < canvas.width) player.x += player.speed;
    if(keys["ArrowUp"] && player.y > 0) player.y -= player.speed;
    if(keys["ArrowDown"] && player.y + player.size < canvas.height) player.y += player.speed;

    // رسم
    ctx.clearRect(0,0,canvas.width,canvas.height);
    
    // الأرض
    ctx.fillStyle = "#22B14C";
    ctx.fillRect(0,550,800,50);
    
    // الأغراض
    ctx.fillStyle = "yellow";
    items.forEach(item => ctx.fillRect(item.x, item.y, item.size, item.size));
    
    // الناس
    people.forEach(p=>{
        if(p.kind=="friendly") ctx.fillStyle="blue";
        else if(p.kind=="aggressive") ctx.fillStyle="red";
        else ctx.fillStyle="purple";
        ctx.fillRect(p.x, p.y, p.size, p.size);
    });
    
    // اللاعب
    ctx.fillStyle="brown";
    ctx.fillRect(player.x, player.y, player.size, player.size);
    
    // التحقق من جمع الأغراض
    items = items.filter(item=>{
        if(player.x < item.x+item.size && player.x+player.size > item.x &&
           player.y < item.y+item.size && player.y+player.size > item.y){
            score += 10;
            return false;
        }
        return true;
    });

    // التحقق من الاصطدام بالناس
    people.forEach(p=>{
        if(player.x < p.x+p.size && player.x+player.size > p.x &&
           player.y < p.y+p.size && player.y+player.size > p.y){
            if(p.kind=="aggressive") score -=5;
            else if(p.kind=="friendly") score +=5;
            else score += Math.random() < 0.5 ? -5 : 10;
        }
    });
    
    // عرض النقاط
    ctx.fillStyle="black";
    ctx.font="20px Arial";
    ctx.fillText("النقاط: "+score, 10, 30);
    
    requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>
